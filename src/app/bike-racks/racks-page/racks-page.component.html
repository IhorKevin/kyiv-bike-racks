<google-map
    class="map-container"
    [zoom]="zoom"
    [options]="mapOptions"
    [width]="'inherit'"
    [height]="'inherit'"
    (mapClick)="clearRack($event)"
>
    <map-marker
        *ngFor="let rack of racks | async"
        [position]="{lat: rack.coords.latitude, lng: rack.coords.longitude}"
        [label]="rack.name || rack.capacity.toString()"
        (mapClick)="onRackSelect(rack)"
    ></map-marker>
    <map-marker *ngIf="userPosition" [position]="{lat: userPosition.coords.latitude, lng: userPosition.coords.longitude}" [options]="userMarkerOptions"></map-marker>
</google-map>

<div class="menu-button">
    <button mat-raised-button [matMenuTriggerFor]="menu">
        <mat-icon>menu</mat-icon>
    </button>
    <mat-menu #menu="matMenu">
        <button mat-menu-item>Item 1</button>
        <a mat-menu-item *ngIf="isLoggedIn | async" routerLink="/editor/create">Додати велопарковку</a>
        <button mat-menu-item *ngIf="isLoggedIn | async" type="button" (click)="logout()">Log out</button>
    </mat-menu>
    <div></div>
    <button mat-fab color="primary"  type="button" (click)="centerMapToUserPosition()">
        <mat-icon>my_location</mat-icon>
    </button>
</div>

<mat-card class="rack-details" *ngIf="selectedRack as r">
    <img mat-card-image [src]="r.photo ? r.photo : 'https://upload.wikimedia.org/wikipedia/commons/c/c9/Bike_Parking_Lviv_7.jpg'" alt="Photo of a Shiba Inu">
    <mat-card-header>
        <mat-card-title>{{r.name}}</mat-card-title>
        <mat-card-subtitle>{{r.coords.latitude}}, {{r.coords.longitude}}</mat-card-subtitle>
    </mat-card-header>
</mat-card>
      
